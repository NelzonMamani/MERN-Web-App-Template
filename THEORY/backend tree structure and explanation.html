<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice 4.1.13  (Win32)">
	<META NAME="AUTHOR" CONTENT="Nelzon Mamani">
	<META NAME="CREATED" CONTENT="20230127;13063500">
	<META NAME="CHANGED" CONTENT="0;0">
	<STYLE TYPE="text/css">
	<!--
		@page { margin: 2cm }
		P { margin-bottom: 0.21cm; direction: ltr; color: #000000; widows: 0; orphans: 0 }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: en-GB }
		P.cjk { font-family: "SimSun"; font-size: 12pt; so-language: zh-CN }
		P.ctl { font-family: "Arial", sans-serif; font-size: 12pt; so-language: hi-IN }
		CODE.cjk { font-family: "NSimSun", monospace }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-GB" TEXT="#000000" DIR="LTR">
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0cm; font-style: normal; font-weight: normal; widows: 2; orphans: 2">
<FONT COLOR="#374151"><FONT FACE="S hne, ui-sans-serif"><FONT SIZE=4 STYLE="font-size: 15pt">Backend
Authentication, Authorization, and Security </FONT></FONT></FONT>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0cm; font-weight: normal; widows: 2; orphans: 2">
<FONT COLOR="#374151"><FONT FACE="S hne, ui-sans-serif"><FONT SIZE=4 STYLE="font-size: 15pt"><SPAN STYLE="font-style: normal">for
MERN Stack Web Applications: A Comprehensive Guide</SPAN></FONT></FONT></FONT><FONT SIZE=4 STYLE="font-size: 15pt">
</FONT>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
<BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
<BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
<BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
backend</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; config</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; config.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; models</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; Post.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; User.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; Comment.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; routes</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; postRoutes.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; userRoutes.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; authRoutes.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; commentRoutes.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; controllers</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; postController.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; userController.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; authController.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; commentController.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; middlewares</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; auth.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; userValidation.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; commentValidation.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; postValidation.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; tests</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; postRoutes.test.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; userRoutes.test.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; authRoutes.test.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9500;&#9472;&#9472; commentRoutes.test.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9474;   &#9492;&#9472;&#9472; ...</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; .env</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; server.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9500;&#9472;&#9472; authServer.js</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
&#9492;&#9472;&#9472; package.json</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">
<BR>
</P>
<P CLASS="western" STYLE="widows: 2; orphans: 2">The <CODE CLASS="western">config</CODE>
folder is used to store configuration files for the application. In
this case, it contains a <CODE CLASS="western">config.js</CODE> file,
which is used to store configuration variables that are specific to
the environment the application is running in. For example, the
<CODE CLASS="western">config.js</CODE> file might contain the
connection string for the MongoDB database, the secret key for JWT
tokens, and other sensitive information that should not be hardcoded
in the application's source code.</P>
<P CLASS="western" STYLE="widows: 2; orphans: 2"><BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
In development, it is common to use a <CODE CLASS="western">.env</CODE>
file which is a file that stores key-value pairs in the format of
<CODE CLASS="western">KEY=VALUE</CODE>, it's usually placed at the
root of the project. It is used to store environment-specific
configuration variables that are needed for running the application.
These variables can be easily accessed via the <CODE CLASS="western">dotenv</CODE>
library. The <CODE CLASS="western">dotenv</CODE> library loads the
variables from the <CODE CLASS="western">.env</CODE> file and makes
them available as <CODE CLASS="western">process.env</CODE> variables.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
In production, it is not recommended to use a <CODE CLASS="western">.env</CODE>
file because it's a plain text file and it can be easily accessed by
someone with access to the server. Instead, developers usually use a
config.js in a config folder for deployment. This is a good practice
because it allows you to store sensitive information in a separate
file that is not included in the application's source code. This way,
even if someone gains access to the source code, they will not be
able to access the sensitive information.</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2">The
<CODE CLASS="western">models</CODE> folder is used to store Mongoose
models for the application. Each model represents a MongoDB
collection and defines the schema for the documents that will be
stored in that collection.</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
The <CODE CLASS="western">routes</CODE> folder is used to store
Express.js route handlers. Each route file defines the routes for a
specific resource in the application. For example, <CODE CLASS="western">postRoutes.js</CODE>
would define routes for creating, reading, updating, and deleting
posts, while <CODE CLASS="western">userRoutes.js</CODE> would define
routes for creating, reading, updating, and deleting users.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
The <CODE CLASS="western">controllers</CODE> folder is used to store
controller functions that handle the logic for each route. Each
controller function defines the logic for a specific route, such as
creating a new post, or updating an existing post.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
The <CODE CLASS="western">middlewares</CODE> folder is used to store
middleware functions that are used to handle additional logic that
needs to be executed before or after a request is handled. For
example, an authentication middleware could be used to check if a
user is logged in before allowing them to access certain routes.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
The <CODE CLASS="western">tests</CODE> folder is used to store test
files for the application. Each test file contains test cases for a
specific part of the application, such as the routes, controllers, or
models.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
The <CODE CLASS="western">.env</CODE> file is used to store
environment variables for the application. These variables can be
used to configure the application without having to hardcode them
into the codebase.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<BR><BR>
</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<CODE CLASS="western">server.js</CODE> is the main entry point for
your application's server. It is responsible for setting up the
required dependencies and middleware, starting the server, and
defining the main routes for your application. In the context of a
MERN stack application, this file would typically handle routing for
the MongoDB database, and handle requests for creating, reading,
updating, and deleting data.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
<CODE CLASS="western">authServer.js</CODE> is an additional server
that is responsible for handling all of the authentication and
authorization related routes for your application. It would typically
handle routes for user registration, login, logout, and password
reset. Additionally, it would handle token validation and checking
for proper user permissions when accessing protected routes. This
server is run separately from the main server, so that it can handle
authentication and authorization tasks independently, ensuring that
they are not impacted by any issues with the main server.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
Regarding tokens, they are usually stored in the client side, as a
cookie or in local storage. They are sent to the server on each
request in the headers, then the server verifies the token's
authenticity and grants or denies access accordingly.</P>
<P CLASS="western" STYLE="border: 1px solid #c0c0c0; padding: 0.04cm">
As for Services, they can be added in the form of a new folder in the
backend tree, the services folder would contain all the logic of the
application, this could include functions that handle sending email,
creating a token, and other logic that may not fit well in the
controllers or routes.</P>
<P CLASS="western" STYLE="margin-bottom: 0cm; widows: 2; orphans: 2"><BR>
</P>
</BODY>
</HTML>